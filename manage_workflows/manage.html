<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage n8n Workflows</title>
    <link rel="stylesheet" href="manage.css">
</head>
<body>
    <div class="container">
        <h1>Manage n8n Workflows</h1>

        <section class="workflow-section">
            <h2>Existing Workflows</h2>
            <div id="workflowList">
                </div>
            <p id="noWorkflowsMessage" class="info-message" style="display: none;">
                No workflows added yet. Create your first workflow below.
            </p>
        </section>

        <hr class="divider">

        <section class="form-section">
            <h2>Add / Edit Workflow</h2>
            <form id="workflowForm">
                <input type="hidden" id="workflowId"> <div class="form-group">
                    <label for="workflowName">Workflow Name:</label>
                    <input type="text" id="workflowName" class="form-control" required placeholder="e.g. Save Article">
                </div>

                <div class="form-group">
                    <label for="webhookUrl">n8n Webhook URL:</label>
                    <input type="url" id="webhookUrl" class="form-control" required placeholder="https://your-n8n-instance.com/webhook/...">
                </div>

                <div class="parameters-section">
                    <h3>Parameters <small>(Optional)</small></h3>
                    <p class="info-message small">Define fields here that should be requested when the workflow is triggered.</p>
                    <div id="parametersContainer">
                        </div>
                    <button type="button" id="addParameterBtn" class="button button-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 24 24" width="16" fill="currentColor" style="vertical-align: middle; margin-right: 5px;"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        Add Parameter
                    </button>
                </div>

                <div class="form-actions">
                    <button type="submit" class="button button-primary">
                         <svg xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18" fill="currentColor" style="vertical-align: middle; margin-right: 5px;"><path d="M0 0h24v24H0z" fill="none"/><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>
                         Save Workflow
                    </button>
                    <button type="button" id="cancelEditBtn" class="button button-secondary" style="display: none;">Cancel</button>
                </div>
            </form>
        </section>
    </div>

    <script src="manage.js"></script>
</body>
</html>